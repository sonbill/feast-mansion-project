@model CustomerViewModel

@{
    ViewData["Title"] = "Edit User Page";
    Layout = "_Layout";
}

<div class="max-w-7xl mx-auto py-6 px-3 sm:px-6 lg:px-8">
    <h1 class="font-bold text-xl mb-5 text-center">Cập nhật thông tin khách hàng</h1>

    <div class="bg-white overflow-hidden shadow sm:rounded-lg p-10">
        <form asp-controller="User" asp-action="Edit" method="post">
            <input type="hidden" asp-for="CustomerId" />
            <div class="mb-6">
                <label asp-for="FullName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Tên đầy đủ</label>
                <input asp-for="FullName" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" id="FullName" name="FullName" value="@Model.FullName" required>
            </div>
            <div class="mb-6">
                <label asp-for="Address" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Địa chỉ</label>
                <input asp-for="Address" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" id="Address" name="Address" value="@Model.Address" required>
            </div>
            <div class="mb-6">
                <label asp-for="Phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Số điện thoại</label>
                <input asp-for="Phone" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" id="Phone" name="Phone" value="@Model.Phone" required>
            </div>
            <div class="space-y-5 md:space-y-0 md:space-x-10 flex flex-col md:flex-row items-center">
                <button type="submit" class="w-full sm:w-auto text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cập nhật</button>
                <button type="submit" asp-controller="User" asp-action="DeleteCustomer" asp-route-id="@Model.CustomerId" method="post" class="w-full sm:w-auto text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-2 py-1.5 text-center">
                    Xoá khách hàng
                </button>
            </div>
        </form>
    </div>

    <h2 class="font-bold text-lg my-5">CÁC ĐƠN HÀNG ĐÃ ĐẶT</h2>
    @if (Model.Orders != null && Model.Orders.Any())
    {
        <table class="w-full text-sm text-left text-gray-500">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                    <th class="px-6 py-3">
                        Order ID
                    </th>
                    <th class="px-6 py-3">
                        Total Price
                    </th>
                    <th class="px-6 py-3">
                        Order Date
                    </th>
                    <th class="px-6 py-3">
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model.Orders)
                {
                    <tr>
                        <td>@order.OrderId</td>
                        <td>@order.TotalPrice</td>
                        <td>@order.OrderDate</td>
                        <td>
                            <a asp-controller="Order" asp-action="Edit" asp-route-id="@order.OrderId" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Chi tiết</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <!-- Pagination -->
        <div class="mt-4">
            @if (Model.TotalPages > 1)
            {
                <div class="flex justify-end mt-4">
                    <nav class="z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                        @if (Model.CurrentPage > 1)
                        {
                            <a href="@Url.Action("Edit", new { id = Model.CustomerId, page = Model.CurrentPage - 1, pageSize = Model.PageSize })" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                <span class="sr-only">Previous</span>
                                <span class="material-icons text-sm">
                                    arrow_back_ios
                                </span>
                            </a>
                        }
                        else
                        {
                            <span class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-gray-200 text-sm font-medium text-gray-500 cursor-not-allowed">
                                <span class="sr-only">Previous</span>
                                <span class="material-icons text-sm">
                                    arrow_back_ios
                                </span>
                            </span>
                        }

                        @if (Model.CurrentPage < Model.TotalPages)
                        {
                            <a href="@Url.Action("Edit", new { id = Model.CustomerId, page = Model.CurrentPage + 1, pageSize = Model.PageSize })" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                <span class="sr-only">Next</span>
                                <span class="material-icons text-sm">
                                    arrow_forward_ios
                                </span>
                            </a>
                        }
                        else
                        {
                            <span class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-gray-200 text-sm font-medium text-gray-500 cursor-not-allowed">
                                <span class="sr-only">Next</span>
                                <span class="material-icons text-sm">
                                    arrow_forward_ios
                                </span>
                            </span>
                        }
                    </nav>
                </div>
            }
        </div>
    }
    else
    {
        <p>Không có đơn hàng nào.</p>
    }
</div>



